@model Cn.Com.Sve.OA.Web.Models.ViewModels.Student_HomeVisit_ViewModel

@{
    Layout = null;
}

<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width" />
    <link href="@Url.Content("~/Content/lib/ligerUI/skins/Aqua/css/ligerui-all.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/lib/ligerUI/skins/Gray/css/all.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/lib/ligerUI/skins/ligerui-icons.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/lib/css/common.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.autocomplete.css")" rel="stylesheet" type="text/css" />

    <script src="@Url.Content("~/Content/lib/jquery/jquery-1.7.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery/ui/jquery.ui.core.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery/ui/jquery.ui.widget.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery/ui/jquery.ui.position.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery/ui/jquery.ui.autocomplete.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/ligerUI/js/ligerui.all.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery-validation/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery-validation/jquery.metadata.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery-validation/messages_cn.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/jquery-validation/jquery.form.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/js/common.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/js/LG.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/lib/json2.js")" type="text/javascript"></script>
    <style type="text/css">
        body
        {
            font-size: 12px;
        }
        .l-table-edit
        {
        }
        .l-table-edit-td
        {
            padding: 4px;
        }
        .l-button-submit, .l-button-reset
        {
            width: 80px;
            float: left;
            margin-left: 10px;
            padding-bottom: 2px;
        }
        .l-verify-tip
        {
            left: 230px;
            top: 120px;
            z-index: 9999;
        }
    </style>
	<style type="text/css">
	.ui-autocomplete-loading { background: white url('@Url.Content("~/Content/themes/base/images/ui-anim_basic_16x16.gif")') right center no-repeat; }
	#f_UserName { width: 25em; }
	</style>
    <script type="text/javascript">
        $(function () {
            $("#TimeFromSrh").ligerDateEditor({ initValue: '@String.Format("{0:d}",this.Model.Criteria.TimeFromSrh)' });
            $("#TimeToSrh").ligerDateEditor({ initValue: '@String.Format("{0:d}",this.Model.Criteria.TimeToSrh)' });
            $("#frmCondition").ligerForm();


        });
    </script>
</head>
<body style="padding: 10px; height: 100%; text-align: center;">
    <div id="pnlByCondition" style="width: 98%">
             <form id="frmCondition" class="l-form" action='' method="post" enctype="multipart/form-data">
                <table cellpadding="0" cellspacing="0" class="l-table-edit">
                <tr>
                    <td style='text-align: right;' class='l-table-edit-td'>
                        班级
                    </td>
                    <td style='text-align: left;' class='l-table-edit-td'>
                        <input type='text' id='ClazzNameSrh' name="ClazzNameSrh" ltype='text' value="@this.Model.Criteria.ClazzNameSrh" />
                    </td>
                    <td style='text-align: right;' class='l-table-edit-td'>
                        学员
                    </td>
                    <td style='text-align: left;' class='l-table-edit-td'>
                        <input type='text' id='StudentNameSrh' name="StudentNameSrh" ltype='text' value="@this.Model.Criteria.StudentNameSrh" />
                    </td>
                    <td style='text-align: right;' class='l-table-edit-td'>
                        家访类型
                    </td>
                    <td style='text-align: left;' class='l-table-edit-td'>
                        <select id="VisitTypeSrh" name="VisitTypeSrh">
                            <option value="">全部</option>
                            <option value="平常家访" @if (this.Model.Criteria.VisitTypeSrh!=null && this.Model.Criteria.VisitTypeSrh.Equals("平常家访")) { Html.Raw(" selected='selected' "); }>平常家访</option>
                            <option value="五一家访" @if (this.Model.Criteria.VisitTypeSrh != null && this.Model.Criteria.VisitTypeSrh.Equals("五一家访")) { Html.Raw(" selected='selected' "); }>五一家访</option>
                            <option value="国庆家访" @if (this.Model.Criteria.VisitTypeSrh != null && this.Model.Criteria.VisitTypeSrh.Equals("国庆家访")) { Html.Raw(" selected='selected' "); }>国庆家访</option>
                            <option value="春节家访" @if (this.Model.Criteria.VisitTypeSrh != null && this.Model.Criteria.VisitTypeSrh.Equals("春节家访")) { Html.Raw(" selected='selected' "); }>春节家访</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td style='text-align: right;' class='l-table-edit-td'>
                        日期范围从
                    </td>
                    <td style='text-align: left;' class='l-table-edit-td'>
                        <input type='text' id='TimeFromSrh' name="TimeFromSrh" ltype='text' value="@this.Model.Criteria.TimeFromSrh" />
                    </td>
                    <td style='text-align: right;' class='l-table-edit-td'>
                        到
                    </td>
                    <td style='text-align: left;' class='l-table-edit-td'>
                        <input type='text' id='TimeToSrh' name="TimeToSrh" ltype='text' value="@this.Model.Criteria.TimeToSrh" />
                    </td>


                    <td style="text-align:center">
                        <input type="submit" id="btnSearch" value="查询" />
                    </td>
                </tr>
                </table>
            </form>
    </div>
    
    <div id="pnlByRecords" style="width: 98%">
    @foreach (var t in this.Model.Records) {
        <div style="margin-bottom:5px;">
            <table cellpadding="0" cellspacing="0" class="l-table-edit" style="width:800px; border: 1 solid black;" border="1">
				<tr>
					<td class='l-table-edit-td' colspan="2">班级：@t.Clazz.Name</td>
					<td class='l-table-edit-td' colspan="2">学员：@t.Student.Name</td>
				</tr>
                <tr>
                    <td class='l-table-edit-td'>家访类型：@t.VisitType</td>
                    <td class='l-table-edit-td'>家访日期：@String.Format("{0:d}", t.Time)</td>
                    <td class='l-table-edit-td'>开始时间：@t.BeginTime</td>
                    <td class='l-table-edit-td'>结束时间：@t.EndTime</td>
                </tr>
                <tr>
                    <td class='l-table-edit-td'>家访对象：@t.Visitees</td>
                    <td class='l-table-edit-td'>家长电话：@t.PhoneNo</td>
                    <td class='l-table-edit-td'>家访人员：@t.Visitors</td>
                    <td class='l-table-edit-td'>家长联系卡：@t.GiveContactCard</td>
                </tr>
                <tr><td class='l-table-edit-td' colspan="4">意见和建议：<br />@t.Advice</td></tr>
                <tr><td class='l-table-edit-td' colspan="4">家访总结：<br />@t.Summary</td></tr>
                @if (t.ReviewerId != null) {
                <tr>
                    <td class='l-table-edit-td' colspan="2">抽查人员：@t.Reviewer.Name</td>
                    <td class='l-table-edit-td' colspan="2">抽查日期：@String.Format("{0:d}", t.ReviewTime)</td>
                </tr>
                <tr><td class='l-table-edit-td' colspan="4">抽查情况：<br /><span style="color:red;">@t.ReviewComment</span></td></tr>
                }
                <tr>
                    <td class='l-table-edit-td' colspan="4" align="center">
                        @if (t.InputUserId.Equals(this.Model.CurrentUser.Id)) {
                            <a href="#" onclick="top.f_addTab('tab-edit-student-homevisit-@t.Id', '编辑家访记录', '@Url.Action("EditInfo", "StudentHomeVisitRecord")' + '?id=@t.Id');return false;">编辑</a>
                            <a href='@Url.Action("DeleteInfo", "StudentHomeVisitRecord", new { id=t.Id })' onclick="if(!window.confirm('确定要删除吗？'))return false;">删除</a>
                        } else {
                            if (this.Model.ShowDelete) {
                                <a href='@Url.Action("DeleteInfo", "StudentHomeVisitRecord", new { id = t.Id })' onclick="if(!window.confirm('确定要删除吗？'))return false;">删除</a>
                            }
                            if ((t.ReviewerId.HasValue && t.ReviewerId.Equals(this.Model.CurrentUser.Id)) || this.Model.ShowConfirmEdit) {
                            <a href="#" onclick="top.f_addTab('tab-edit-student-homevisit-c-@t.Id', '编辑家访记录', '@Url.Action("EditConfirm", "StudentHomeVisitRecord")' + '?id=@t.Id');return false;">编辑抽查情况</a>
                            }
                        }
                    </td>
                </tr>
            </table>
        </div>
    }
    </div>


</body>
</html>
